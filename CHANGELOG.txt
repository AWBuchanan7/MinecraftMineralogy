Port to 1.12.x (Thanks to skyblade)